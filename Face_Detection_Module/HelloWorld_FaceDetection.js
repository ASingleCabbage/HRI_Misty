/*
*    Copyright 2019 Misty Robotics, Inc.
*    Licensed under the Apache License, Version 2.0 (the "License");
*    you may not use this file except in compliance with the License.
*    You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
*    Unless required by applicable law or agreed to in writing, software
*    distributed under the License is distributed on an "AS IS" BASIS,
*    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or 
implied.
*    See the License for the specific language governing permissions and
*    limitations under the License.
*/


_currentBearing = 0;
_currentElevation = 0;

misty.Debug("starting skill helloworld_facedetection");

// Register for face detection event
misty.RegisterEvent("SeeFace", "FaceRecognition", 250);
misty.RegisterEvent("FaceTrack", "FaceRecognition", 250, true, "Synchronous");
// Timer event cancels the skill
// if no face is detected after 15 seconds
// misty.RegisterTimerEvent("FaceDetectionTimeout", 15000);


// misty.RegisterEvent("FrontTOF", "TimeOfFlight", 100);
// //filters out sensor data from back
// misty.AddPropertyTest("FrontTOF", "SensorPosition", "!==", "Back", "string");
// //filters out triggers beyond 1.0 meters
// misty.AddPropertyTest("FrontTOF", "DistanceInMeters", "<=", 1.0, "double");

// misty.PlayAudio("s_Joy3.wav");

misty.SaveAudio("class.wav", "//NExAASKAI8AAiGuSwj74eHjzIH9D/AOCN/HfH8AM8z///4Z/H9D/wAOh/meHwPPZDyw/AA/BGfwR0P1UBlw/7dfAMzP8PPEc/5g9oAju/zwMPD3zps08vxkU9nqeTr//NExAoSohJUAUMYAWcMi9/6uhlOQlyPLOc/PJr5SG71I29utKeeecb8mIrybT+nelOcW4BA1hfSqZpK+jC2TNX925H3UvQS/f5he+2K3YRgABtoDUAl07JoDKc+ZuMs//NExBIW2kqEAZGYAQ2DBPnnzRicA5QBYgN4wbmJ+zreFyCJidCdU3rZbqsgimosEg1+yl33KY5ZeImYFQqav03STU9aymWy8XTA+mgf////L7pBOp9V/9ZMKabS4YSl//NExAkUwZa4Adh4Af7Lvaix6fPJ1Es3EpV2LYBhUI0kYsQbwIA/YkVUA0FA6hq1eVFb4zr7+KfH//+Pjet++cXvbWvZX0ti9r3vrH/+tXl3bEDDCp/63Y3AZZWonRQo//NExAkUYZ7AAIvKlMmyR0fJ1LOKDBDsL+pE8LKHSMByMpmRJwLdl8lSfkZWJEl9RCwsvnxQoMernZ5z/VnZY2goIAqkSDiLVQuyuWWwsWIrH2GpvrXdjoDYPZqksfxZ//NExAoUQarAAIPQlMVVOiQGVTPsyEqFKWd4fae5+GJm1bF1bN7NqGoa3wtioNQ8AXbIOF7m03VO5hIZRAN7kOSjJXtJWvuZqtzW8bB1qFDbWVKp/CklcGGByExFp9TK//NExAwUkaaoANNWlD5hAc5W0XgUICNMSikYiAicpPYvP7+o2W0upmXsegyE1MPIh5ra60a4cmcdDUi41a15qanpmknO/3fucedxJ2HnuVpMS2RVlsNMbEYUBQlOP8Mz//NExAwRuTJ8AOPMcGBEs0nBASrTHYCEucLVOT02otcPlyy2+u9xv+9/fgT53w6YpzAZeVJSU53n/5ry1M6LA0LPPOfTedbUcp/W3IgBFiWOEC7MYwWHhJSzdYRAaHBQ//NExBgR0NZ0AOvMcD7YHsZj1jOIjJ9e0kam8azfDwlEYyBF/YskvCghaQfUcUn6tudIiA5R///////F6nea3bGACYpGZ6MwCSGCgBhqBVF01RjlAMFNQBBoqyMc3//O//NExCMS2T6EAOFGcHdtGNZCFkHwAQIc0z/hSKHHnFFggBw+LF0VjAAQDzRQYTvs/////7U13Ty5m4iiSMiSp7PXp7X/ddkKCZFhEJr//8+tTaBJWfQm12cUZmSzfn0f//NExCoQgWaMANiMlCbLheUZu4xkvcEHLkCYWOwt/Ru////+GMcrCtxtSCdz202E1/73l0BCorqVJ/+/va666ChHayOZQ/T1W2I3CmIz5tem5Ce2FD7D212gCoaweggy//NExDsRCV6YAMlSlASCSH//////9arna71DN5FxqFv6tPf/klD+7gJwFzlcVve5LfRbdz6Ds8gUpDyzHLLag6PaH1nd/9y3SrTyekiZRkEIkcKZNd1sxJ9cxrd//lX///NExEkRyU6gANIMlfqkPDeGRYXYYUEovycAAsMTMFeAWDgl0zg+BiKu7WMMm9HzCpm5UTuaGmuwYu1sjm5oyuv//bIwER0MJuPc6u/7HO88UMJFqPWq/8+J7C7pPnnJ//NExFQSiaKwAMPKlBlNnPKNCON/GxXBxnNoJBBBAZWmdjTdUOrUqsunW5MtpddmYzZ//y71///+kRnFoDEGKQQdM/nNuIGIJf/O4vMedT0nJePLv1JqVAEuBOKjEU0A//NExFwROZ68AMYKlITjCLiIyoDwoKCCRUZD+Qpqtkvt/0+3//6O1B0Fo2MZjSHcuZdyTqsdfb//////+hX9Y+VEloKuM40c4IvXqRrgGGih9B6PDUAwBYFiZCEIN0CB//NExGoR0aa0AMUOlPC6xAB4Yppr///T7f//1Qw9g6ZljRzs6mWpQQRRR4g4qwJf//////0K1u/5KXOIThiNSppIACrNmZAIQAGlAfcihGDPAZ4AScQEcoXMJWHSiEo8//NExHUSma6sAMUKlJs////////0MaYwozlKVNSlKwYTCT//d/////rqphAJMgHMdHP51MxCPS8AwIyJJNAaMXBcR+2czEacqJPWulsRelSN5TxFM3yQ4k8XH///hKvF//NExH0RkZKYANTElC8idIw1O/8lnv///bkaYQFSYcQGGTgNqRSFBcnpMMEi7RA5GRto98EyeTp4qK6EYFrMcgDAoBBCKyhiaBBbf8IQb/XRn5AeEEB4QHA5/IqxQde7//NExIkQ4I5IANYeTJmiIKEh+DgBxICxT3DsG4uafl2k3URUv9kH/ln+jvCO+9/CfL/pxu8QmQZL2lp8u5bC8V73TmGOMAGKfSAaMCqTn0w6ulwl+wJQYwwZgsNJbsXX//NExJgf4v5QAEpQuWWa7l3XvbMDNqfbP4sSKKanTgPiHgSCxzScnrh9+yHR/OzKUmf/voWH4SCYAcPjcHwVhwNPuqPJhbqfShcQyD8PiQVhGeaIFCtvkUOl7j4ioxcR//NExGsiKtJ4ANMQufFxp3eNuHpuo///90+RiR1c8tRE+lcDIZ58OhHYRcqbdMchkJdoclQiDGNQBw2eoQSREiRNtNAgemFep++d9pnKzNKtNQIjs5mI7IzqoJB040AW//NExDUeMdqYANMYmAHMiZtjBxtevs4nVWO08hOR3bL16uHGO752e/qV1638kK6ETGIYT5WwlVdTtY9CgQMl1iMW//3Oe15nJljgkKFC7AAt/WVIacRy3WgIPLAu/IBv//NExA8UGdK0AMHelckUPBaRzy3f//8475bn2H5bzgT06uH5Cjw1IsT/wX1tVP9xhUbmXeoOPr4//1/87zrcHeqNrBfMZpcY8kkWfhH06u/uCjapU9R0LS0abm8ohfY8//NExBESqc6sAMnWlC42zCLUM////LYPIDaQrqJznMOgdLD58RgTmGpeCENTzofR9vYi2v///j+L+TVusPJa2TY2sVD0BVXGRLlMHAT3wwiEm8YYYgiPlXpxPzhxkz6Z//NExBkR8TaQANvScPI567ej3u4DBn4r///wzfPcy9ZdDzyU/kkUBUTXAmLCZdCQmUtYd/+DVbjwaPBptRNkhgfCcOoILvuADw2pTEgda78AuLWYCopzAUIVjpkToySc//NExCQSSQ6AANwWcIAJ10H+xvwnUPJrpkVljyWN5c1sxzMfnmAB5f////////7rdUsqmok+pgSbgpqscU2GU8ZnBFERA4YAQzXthdFrwiYHjW0MeS3EOQhLK+8b+/Wd//NExC0SkNp8AOPScBba7MuHwSNLtkrwmHbmMUExn////////77Sj3ujquXXaGM0ICXefEgfggGWHUZEAwEgpbQopWDGsMAQMm43VdqTSt6GWVe0GtW0eo3QpjHCJ3be//NExDURiNaEAN4KcE6bf/l+I6PX///+TTCyXmK0Vf30k1fjuyxMle+8DDBwZI8mwpEAqIhfhetzcUQRssFj+FIcV2h51z/VKazHx9+n3f///7/nOdyN///5NGI1pKvR//NExEETseqkAMvEmMmx3n1Di2P///+8ufclrUE+I0ZYZ8DuZm4SQrUqJmYJevan9cTs28SNr3xCFO5oZ9xPVSZvhwzugjrydaszzgZGZef//p0dEADTxcgI68U/r7qq//NExEURGa68AIvEla0wm4aYeUGDAr52EqBEalD8CNLmBCzrajbotbRJobqDiwFN3Mhugtofm4sVigg8hQGVCk///mmi2UBlMwMGSjFvKunbv//+70X+R8KdDSvK9AFk//NExFMSKba4AJNKlAMzuwACTAp0DygAEEXBR16r7fzXBSxYqhyADABlgWFlb0f+tRVDCQBDnl////1DorEQ6YiCv/////W6VYryGLuGSfTg5mMA7RAmG0rbqewm0PbW//NExF0RcbacAMIKlNH///tsJmKJnAOgiBAfeic5xB9RyNd/0KJgmfc+v////W8Hxzi4fICc4fLhdbtI/4QAa6MGRYljPtNnsYFHD0aXS8TgwZNt6IRLTlzUF9xGNnzv//NExGoQ4L6EAHpMTDH1lWTHodK6VkAFQMAX5oZeriDWEyYtD3T13uWemMmhQHpQbiOLjXY9auya9NkmMYVF6jg4NAGCOKxuE5cge589L3r9G0/////3u1ks5hxqsaPG//NExHkgOwaUAMvOuRg6hB5hNzIA/PAqiD50X2IYQjaUxgQXG0LGKqa5TbD1qMpxZ/i2fuUrqZfXrdxm6/LjYl4whlCAQYDd99UH2XQPNu3A1nHUJu+/Efr1KM940A2T//NExEsgmfKgAM5YmFAJgkIMbbV/vmTnZM9MznU364hFh5eZiQqbDsxaeKkVMQodvttb8BlHNd///ZYSLPPng+HzxYK1/bhBA3rLoMEtX6tCNKhyegFiCpaJ8UqzI/ot//NExBsSEZ6wAHtKlV+iks4ZG0vHCkTjNERQgeEWUCtERWcOugdCQGmEha7f///rUVBRXHzX46n+/xWrgvoxsAVnvTeNKk8qeAQYFUMafYNhtOGrYdLfdFx/+6ac55qo//NExCUSocp8AMLElGyRtlAWmCujme5UKhikAnK0rJ///6rupcMjlZAI8IVHtn////lljJC2AtlwiBBBghnM4ihdESEZPGSAKAQNhuSAVk9QXJ0aNGANb1////9YfZCJ//NExC0P4LZgADDSTPJiM+XCwY//5QuflJeoECGUUXVdzKrXvGUWAIGeIgRAs+2MkxztpJjBsPQGeQ9tGgQwhon4CeHOUrkTwkpBz8mVDdWLSLGl3jdPT71n/N/836XC//NExEAgaxJwAEvQuSJTvf/UV8V6fXFcTG7o9wZTVLiAOJygWDrFyJIDIjB/lraV7vUJV+/88S8VPJ4+JuEaSxdbVz2MLF5ebx6PY5hwAvSlruopmvTxHyepLn7ksugd//NExBEUYiKUABMEmAbGthoHYlWpvau3tpjd5yczumV/7dz3qpNtvn0t61kkRCM9BjKyM6MOWEgjhxSwTiwTKLH08eKSbWPcPWzc7NaqZRAASFI/wqf2d+VT4znAwcJs//NExBISacKUAFmElIYBOBypLTmdqNI55/Z9v//9qvRVzo6+zqylZsx1GLeUwor540FCiFICYIlxgPlWL5jHPff0/py1ztcRHBYJlEM39B5zPC/ANx1qREg50OSiREzX//NExBsQCI6cAMPYTJQBIHj5XHdYKwHpiqbkhQcLvMf//7tNEUUQB80gTgcm97r9fVSq/G6IppcypuIWQt6jWij1F4wI3pqRuUAWErBlEbEh5ykTLVufmNS0eTXTBJii//NExC0VCbKsAMZElbpPY+DyW916fv5//////I6iwYdwA7hxZ3dHo9Xud8kgd6h0HCZc7lX/bRP5EzTDe61cMWiqtgHBN/dS3Uslc2xmFdkq+oXHWysUh940qIbuRh3M//NExCsRkVrAAH4ElbW7GsMH///+jsVnGGEDHcWzlvVzdwesHDLq/tXhymk8IZ1jPk8S63USUT51HAMmBadmZNKfuLZgXlIkj8Qaa5Mabgz+dlbl0X08/yjf//65BRlD//NExDcSUa68AG4ElQkIBkMQj1fV9KHR5TIDCeyafpXgSsoZhFjx+k1nt4mWpBFCTK4/QNRnhSDOpY53AuCMBvGIVMBzEMTcIuMAX1GiSKTV///9TrTPGBfI2vvz+eWO//NExEARQTrAAFPacRw2Mncm/hkmvIQhLZgMvkQmubC5bbfRz6N/xUqkZtCW05+3bYdG5W6U/GGHvLE7qnEqaZIG2+pZKxXr3//TV1OJYxAq0gjufC9+FuD6DzZlqI0T//NExE4SoU68AH4EleMQ8GaSiJtJSmk0Kypx/RiZhjGMdASl3HN9dP8mTSh/qpWF/ENJWcRykoiKFwgB1cyU//9p1dBIwUwwmLINWRyYZEZkDHJWhc6G8sCGRYkyGZgR//NExFYSoU64AIPElBRIeh05fDSZl0CdLiuQEJDmwOpboXFZ0dSmXR3HUaRyqxGoUyzM80RWP///6oM4Ywzo5kQu/8uVUdziYfu+le8WDQJS8KZRrnHCt/G+e/Eth15R//NExF4SYbKwAJPElAGpXznAHyqOQlKXblS4wVdCnYLGClXQ9ixHwfqhgQag0d2V//9crMGcWFjK8S/SoGXD2JIKrRER1s5YUYXCF06wHKvRRVxBhaJs2idM0pkH+X1E//NExGcSGUqkAMPElJ4xHrjV9xmPSEoIYVQxEwTxFCJLzHpNX//9TVQ9GIgVAv+gRLDalU/01bb3HNSHduEco9x7nKoqGdkRIlgDH1QJOCILCpFKXvJbr1DxhYPCYCgp//NExHERyT6UAMvUcERVnZvr//32KHWb/+VXUz/oX6+cXfu61FDNzqliiiImQxcBvAChEGKzF5a2s1FsvXy/1kTl////+v////vPvZ06vz/9G75xl2ZTDFdKMYp56kZ5//NExHwR+TqEAMpKcOij88whPcVydEHjGCuMBbEWF+EgCoaLwuxuMwvxkCwLAiLN1dH/lf/J9z//hXL///+v//////+///rX1fG7W3itd/H9da+s6+q/WMvt+s9Puz6D//NExIcVyw6MAJBUuZ1mntTbU98PGLRl3HXTcczIn1IecQwzjUEkFKrK0TsDCwq42RcjqRItZA1cZBMXIfBMTFLYkRxl2Rr/av//////U/1VWuuylPVVTRsgySkmRL54//NExIIamyaIAAhevNzBIoGiRLGZiMxcLpBExGofjMkxYD1FwmDMOAScOcbjgC7GRWCzJwXwdgWkcwwo7ymbVf///+3///W+pFalrtqatTIuqYHFma1mR4wRJItLo4E0//NExGoSSyKcAAAavAYww44zEvGg5RiiDDnKQtB/JwcsLgJMDpMRLxNRPiRKCyXHwgk48v////v9Pr9fWylvstdbqZlXczONn1OmXZxM0HmPcmGJSNR3DiJgmJYJuOgg//NExHMRqyKcAAAavANYVoXZwnwxCME7HCiCzGEHcMIMYYIbSGFvLxNPq////6fTp/36mLWysxz6TFmpKqti5CSmmDwnKFRCBcia4jDwRYtkIZBKA8wNwUQpFsAMIkL0//NExH8Sex6YAAAavVUW0EIE0WRoIAXsJwuLKv/ln8///KvB3////////392XO22/+qEzUceU50JKebc2dNNR3Y046chMZMVhUJQrIOVQeJCMAUNgfF0CYUiTOGo6NSh//NExIgQ6yKYAAAUvHNEkRlUs1X98Q0acTIBVEo5l/ZCmUYcSYuqat//zeGMpW9P//5WVisZH//9SlqXK5WmddW9qFKlpYCDIGMBAT1MYxlK3CieovC0WUwx7I9DYXDt//NExJcSixqMAAhOvJxySwDFkSkiNo1r55ehIYBXzUEjkjWApETXP4SPFZ3T/VU8GVDkFh/nTrytpZDDqaBEoqWKyQFIlSQFLTpJmkqqqqqqXJVVVU00w1H//SVVUQf///NExJ8Rct5oAAiEuf8CaaYYj//waqqIf//sJpppt//oGqqqrppp2lpppoqqqHIqqqq6aaRKWmmmiqqoMV//rppph0xBTUUzLjk5LjVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwRiMYgABGMcDk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExLgR+ADYAAAAATk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//NExKwAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//NExKwAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV", 
                false, true);
misty.SaveAudio("candy.wav", "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mC6l1FYzeeLSEJBdH+uDHYNIaaheTWJmWFCVk/G5ziSW3vWaa1vOdY+Mb12Ffb5G47GmKjVAhqecfSH+IP3EDD0ZJaRDPsZ5qF6YRjp6AbApa9H///NExHkYge6cAMtemf/////dKRFRwKyLoweXOiMMtuBlGApcqiR7HPn//////qMcXVe4/IaPHoTD2U006TPGgZiYmer2LDgk6QhycEdXV1uLtBj4Pn//////8b0zaZHW//NExGoR+fKkAMlSmaG42j6dbIorKk9A6oru5r/6/+b+WPYbHsezx8+ZKLPJ6UovRMrLvG0QJdPSMGjnEWcRxVNoeHX4wY+TV////+nu/ngoxBo6eYeTibRKMJSGUVRO//NExHURefKcANCWmVfH7//9///v+7hPES8kCSh0WMX0l7S6etdvC6T8QWSRF057JVR5twRLWPCMgqk9X////+40h7J28UYRzAdD0xyz4JsuImNxHmb/X////r/+9qLX//NExIIRofKYANCSmSJHNhhsWQT2nJRnLT3/6HRsWxxCJWOLz9yWhJzMQQDMSYzLZgaOyb///0NNZUWjCFxRYCAoSeH24ocoNzREDwiAfD8kk5JZZ///////MqVL1M4O//NExI4R6eqgAMnSmT5lTELUGVN2CMpE6XE9Ei8obBoz2HxLHXmV3SfXx81l5X9Z/k51rjgkISIeFThFiFqMclGNQQzlh7THmqpAMFN6t6EJSfGLPXquXf6jE1gmRWXw//NExJkSadqwAMNQmNGMmHWxhBpyq4MdHt6sImFaaP6TWy8ztJeX5CZIN1geGWldpUhnFq3/6fO9uXyzfXfO45syI0tm/XBEiHEqWuCvrYaAQDKHkjpsNStNFUTz0zPW//NExKIRqUa8AIPScG3Ik/dBuVT+H1/dLqzU/aAbks1BAEEUqCOq4k22Vuav672t0VzjzmqkXAj3/YWIDhVDyTUV/kBiYwGwDxpgvrvBsig0+CrL1zBI7UMvuqWZv84+//NExK4RqULAAHvYcCL/SNAkPG1CgPJ6aETmm87nNf6mGkig6NiRzHH+3//m0JKMAihDfSrLVMC34VRGoiDVnkAzrSiyhWrLeQl29RKhxZXb1Wuv/s3AtckisB2CoFws//NExLoSGTrAAG4WcFm1t613///8NBx2SaMue/9boihr//////cqwwBTiEFjoMEh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VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExHsAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVTEFNRTMu//NExKwAAANIAAAAADk5LjVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//NExKwAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//NExKwAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV", 
                false, true);

misty.MoveArms(90, 90, 100, 100);
misty.MoveHeadDegrees(0, 0, 0, 100, 0, 0); 
misty.ChangeLED(0, 0, 0);

misty.StartFaceDetection();

// head movement range
// pitch - 40(up) to 26(down)
// roll - 40(left) to 40(right)
// yaw - 81(right) to 81(left)


function _SeeFace(data){
  
  misty.MoveArms(90, 0, 100, 100, null, 2000);
  misty.ChangeLED(255, 255, 255);
  misty.PlayAudio("candy.wav");
  misty.DisplayImage("e_Admiration.jpg");
  
  misty.MoveArms(90, 90, 100, 100, null, 3000);
  misty.DisplayImage("e_DefaultContent.jpg");

}


// FaceDetection event callback
function _FaceTrack(data) {
  misty.Debug("Final elevation and bearing: " + _currentElevation + " " + _currentBearing);
  misty.Debug("Face Detected");
  var faceTrack = data.PropertyTestResults[0].PropertyParent;
  misty.Debug("Face Detected, at bearing " + faceTrack.Bearing + " and elevation " + faceTrack.Elevation);
  
  _currentBearing += faceTrack.Bearing;
  _currentElevation += faceTrack.Elevation;
  
  if(currentBearing > 81){
    currentBearing = 81;
  }else if(currentBearing < -81){
    currentBearing = -81;
  }
  
  if(currentElevation > 40){
    currentElevation = 40;
  } else if (currentElevation < -26){
    currentElevation = -26;
  }
  
  
  misty.MoveHeadDegrees(_currentElevation, 0, _currentBearing, 100, 0, 0); 


  // Stop face detection
  // misty.StopFaceDetection();
};

// FaceDetectionTimeout callback
// function _FaceDetectionTimeout() {
//     misty.Debug("face detection timeout called, it's taking too long...");

//     // Change LED to black
//     misty.ChangeLED(0, 0, 0);
//     misty.StopFaceDetection();
// };